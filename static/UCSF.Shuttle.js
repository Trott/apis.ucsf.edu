var UCSF=UCSF||function(){"use strict";var e={_ie7q:[],serialize:function(e,t){var n=[];for(var s in e){var r=t?t+"["+s+"]":s,a=e[s];n.push("object"==typeof a?this.serialize(a,r):encodeURIComponent(r)+"="+encodeURIComponent(a))}return n.join("&")},createCORSRequest:function(e,t,n,s){var r=new XMLHttpRequest;return"withCredentials"in r?r.open(e,t,!0):"undefined"!=typeof XDomainRequest?(r=new XDomainRequest,r.open(e,t)):"undefined"!=typeof flensed&&"flXHR"in flensed?(r=new flensed.flXHR({xmlResponseText:!1,onreadystatechange:function(e){4===e.readyState&&(200===e.status&&n?n(JSON.parse(e.responseText)):s(e))},ontimeout:s,onerror:s}),r.open(e,t,!0)):r=null,r},createRequestString:function(e,t){var n=-1===e.indexOf("?")?"?":"&";return e+n+this.serialize(t)}};if(!e.createCORSRequest("GET","http://www.example.com/")){window.flensed={base_path:"http://apis.ucsf.edu/static/flensed/"};var t=document.createElement("script");t.src="http://apis.ucsf.edu/static/ie7_polyfill.js",t.onreadystatechange=function(){if("complete"===t.readyState||"loaded"===t.readyState)for(var n=e._ie7q.length,s=0;n>s;s++)e._ie7q[s].callee(e._ie7q[s].options,e._ie7q[s].success,e._ie7q[s].failure)},document.getElementsByTagName("head")[0].appendChild(t)}return e}();UCSF.Shuttle=function(){function e(e,t,n,s){s=s||function(e){window.alert(e.statusText||"An error occurred. Please try again.")};var r=UCSF.createRequestString("http://apis.ucsf.edu/shuttle/"+e,t),a=UCSF.createCORSRequest("GET",r,n,s);a?(a.onload=function(){n(JSON.parse(a.responseText))},a.onerror=s,a.send()):UCSF._ie7q.push({callee:UCSF.Shuttle.stops,options:t,success:n,failure:s})}return{stops:function(t,n,s){e("stops",t,n,s)},routes:function(t,n,s){e("routes",t,n,s)},plan:function(t,n,s){return s=s||function(e){window.alert(e.statusText||"An error occurred. Please try again.")},t&&t.fromPlace&&t.toPlace?(e("plan",t,n,s),void 0):(s({statusText:"Required options fromPlace and toPlace were not specified"}),void 0)},times:function(t,n,s){e("times",t,n,s)}}}();